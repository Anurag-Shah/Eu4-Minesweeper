country_decisions = {

	minesweeper = {
		major = yes
		potential = {
			treasury = 1
		}

		allow = {
			treasury = 1
		}
		effect = {
			hidden_effect = {

				# Setup Bombs
				set_variable = {
					which = bomb_count
					value = 0
				}
				while = {
					limit = {
						NOT = {
							check_variable = {
								which = bomb_count
								value = 12
							}
						}
					}
					random_province = {
						limit = {
							region = minesweeper_region
							NOT = { has_province_flag = bomb_flag }
						}
						add_province_modifier = {
							name = bomb_modifier
							duration = -1
						}
						set_province_flag = bomb_flag
					}
					change_variable = {
						which = bomb_count
						value = 1
					}
				}

				# Setup Numbers
				# Currently not hidden


			}

			if = {
				limit = {
					NOT = {
						ROOT = { TAG = MSW }
					}
				}
				switch_tag = MSW
			}

			minesweeper_region = {
				limit = {
					NOT = { has_province_flag = bomb_flag }
				}

				set_variable = {
					which = neighbor_count@THIS
					value = 0
				}

				minesweeper_region = {
					limit = {
						has_province_flag = bomb_flag
						NOT = {
							province_distance = {
								who = PREV
								distance = 29
							}
						}
					}
					change_variable = {
				        which = neighbor_count@PREV
				        value = 1
				    }
				}

				if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 8
						}
					}
					add_province_flag = eight_flag
					add_province_modifier = {
						name = eight_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 7
						}
					}
					add_province_flag = seven_flag
					add_province_modifier = {
						name = seven_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 6
						}
					}
					add_province_flag = six_flag
					add_province_modifier = {
						name = six_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 5
						}
					}
					add_province_flag = five_flag
					add_province_modifier = {
						name = five_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 4
						}
					}
					add_province_flag = four_flag
					add_province_modifier = {
						name = four_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 3
						}
					}
					add_province_flag = three_flag
					add_province_modifier = {
						name = three_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 2
						}
					}
					add_province_flag = two_flag
					add_province_modifier = {
						name = two_mod
						duration = -1
					}
				}
				else_if = {
					limit = {
						check_variable = {
						    which = neighbor_count@THIS
						    value = 1
						}
					}
					add_province_flag = one_flag
					add_province_modifier = {
						name = one_mod
						duration = -1
					}
				}
				else = {
					add_province_flag = zero_flag
					add_province_modifier = {
						name = zero_mod
						duration = -1
					}
				}
			}
		}
		ai_will_do = {
			factor = 0
		}
	}

	test_decision = {
		effect = {
			set_variable = {
				which = test_part_2_count
				value = 0
			}
			every_province = {
				limit = {
					region = minesweeper_region
					NOT = {
						province_distance = {
							who = 5000
							distance = 29
						}
					}
					NOT = {
						province_id = 5000
					}
				}
				change_variable = {
					which = test_part_2_count
					value = 1
				}
			}
			add_treasury = variable:test_part_2_count
			add_treasury = test_part_2_count
		}
	}

}
